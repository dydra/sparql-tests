# coding: utf-8
#
require 'spec_helper'

# Auto-generated by build_w3c_tests.rb
#
# <%= test.name %>
# <%= test.comment %>
# <%= test.action.query_file %>
#
# This is a W3C test from the DAWG test suite:
# http://www.w3.org/2001/sw/DataAccess/tests/r2#<%= test.subject.fragment %>
#
#
# 
# This test is approved: <%= test.approved_by %>
#
describe "W3C test " do
  context "<%= File.basename(File.dirname(test.action.test_data.path)) %>" do
    before :all do
      @data = %q{
<%= IO.read(test.action.test_data.path) %>
}
      @query = %q{
<%= IO.read(query_file) %>
}
    end

    it "<%= test.name %>" do
    
      graphs = { :default => <%= test.action.test_data.nil? ? 'nil' 
                  : "{ :data => @data, :format => :#{File.extname(test.action.test_data.path).sub(/\./,'').to_sym}}" %> }

      repository = '<%= File.join(File.basename(File.dirname(test.action.test_data.path)),
                        File.basename(test.subject.fragment)).gsub(/\//,'-') %>'
<%= results_snippet %>

      
      sparql_query(:graphs => graphs, :query => @query, 
                   :repository => repository, :form => :<%= test.form %>)
    end
  end
end
